<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>iOS-Procedure-Format</title>
</head>

<body>
<h1>iOS-Procedure-Format</h1>
<h2>2-format</h2>
<ul>
  <li>text
    <ul>
      <li>line-based</li>
      <li>json</li>
      <li>xml</li>
    </ul>
  </li>
  <li>binary</li>
</ul>
<p>&nbsp;</p>
<table width="100%" border="1">
  <tr>
    <td width="26%">format</td>
    <td width="74%">parser-class</td>
    <td width="74%">&nbsp;</td>
  </tr>
  <tr>
    <td>line-based</td>
    <td>Custom class and method</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>json</td>
    <td>NSJSONSerialization</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>xml</td>
    <td>NSXMLParser, TouchXML,libxml2,TBXML,KissXML,TinyXML,GDataXML </td>
    <td>&nbsp;</td>
  </tr>
</table>
<h2>&nbsp;</h2>
<h3>binary format</h3>
<p><a href="https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html">NSData</a></p>
<p><a href="https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableData_Class/Reference/NSMutableData.html">NSMutableData</a></p>
<p><a href="https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/BinaryData/BinaryData.html">Binary Data Programming Guide</a></p>
<p><a href="https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSPropertyListSerialization_Class/Reference/Reference.html">NSPropertyListSerialization</a></p>
<table width="100%" border="1">
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Serializing a Property List</td>
    <td><br />
      + dataWithPropertyList:format:options:error:<br />
      + writePropertyList:toStream:format:options:error:<br />      <br /></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Deserializing a Property List</td>
    <td>+ propertyListWithData:options:format:error:<br />
+ propertyListWithStream:options:format:error:</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Validating a Property List</td>
    <td>+ propertyList:isValidForFormat:</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Obsolete Methods</td>
    <td>+ dataFromPropertyList:format:errorDescription:<br />
+ propertyListFromData:mutabilityOption:format:errorDescription:</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table>
<p><a href="https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Archiving/Archiving.html">Archives and Serializations Programming Guide</a></p>
<p><a href="https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/PropertyLists/Introduction/Introduction.html">Property List Programming Guide</a></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>Naming - Class</h2>
<ul>
  <li>SHEMFormatter_Menu</li>
  <li>SHEMFormatter_Category</li>
  <li>SHEMFormatter_Dish</li>
</ul>
<p>&nbsp;</p>
<h2>Interface &amp; Method</h2>
<table width="100%" border="1">
  <tr>
    <td>method groups</td>
    <td>method declarationï¼Œ return-based interface</td>
    <td>block-based interface</td>
  </tr>
  <tr>
    <td width="26%" rowspan="2">parsing/decoding</td>
    <td width="26%">-(id) parseData: (NSData*) data error: (NSError**) error</td>
    <td width="26%">- (void) parseData: (NSData*) data resultBlock: (SHEMNSResultBlock) resultBlock errorBlock: (SHEMNSErrorBlock) errorBlock</td>
  </tr>
  <tr>
    <td>-(id) parseString: (NSString*) str error: (NSError**) error</td>
    <td>- (void) parseString: (NSString*) str resultBlock: (SHEMNSResultBlock) resultBlock errorBlock: (SHEMNSErrorBlock) errorBlock</td>
  </tr>
  <tr>
    <td rowspan="2">formatting/encoding</td>
    <td>-(NSData*) formatDataFor: (id) obj error: (NSError**) error</td>
    <td>- (void) formatDataFor: (id) obj resultBlock: (SHEMNSResultBlock) resultBlock errorBlock: (SHEMNSErrorBlock) errorBlock</td>
  </tr>
  <tr>
    <td>-(NSString*) formatStringFor: (id) obj error: (NSError**) error</td>
    <td>- (void)  formatStringFor: (id) obj resultBlock: (SHEMNSResultBlock) resultBlock errorBlock: (SHEMNSErrorBlock) errorBlock</td>
  </tr>
</table>
<p>&nbsp;</p>
<h3>Historial</h3>
<table width="100%" border="1">
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>return NSArray </td>
    <td>- (NSArray *) listFromString : (NSString*) str</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><p>support both NSData and NSString</p>
    <p>NSData with default encoding UTF-8</p></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>return error by-ref param</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>use block, instead of return</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><p>configure the parser (for multiple subsequent parsing operation)</p>
      <p>such as :</p>
      <p>delimitor, </p>
      <p>keypath </p>
    <p>&nbsp;</p></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>parse first , and get result from property, not from return</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><p>&nbsp;</p>
    <p>go semantic-less : semantic verb are not allowed. </p></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><p>reverse actions are in one class. </p>
    <p>was parser and formatter are in 2 classes. </p></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>reuse instance, among mulitiple class, both parse and format. </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table>
<p>&nbsp;</p>
<p>&nbsp;</p>
<table width="100%" border="1">
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Format</td>
    <td>parse NSData</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Format_text</td>
    <td><p>parse NSString, </p>
      NSDate -&gt; NSString</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Format_text_line</td>
    <td><p>enumerateLinesUsingBlock</p>
    <p>[- (id) objectFromLine: ];</p></td>
    <td>&nbsp;</td>
    <td>override objectFromLine:</td>
  </tr>
  <tr>
    <td><p>Format_text_line_tab</p>
    <p>deprecated. became a feature of _text_line . </p></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Format_text_line_group</td>
    <td>Regex for capturing the group. </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><p>JXFormat_text_line_group_optionQuestion</p>
    <p>this is a typical multi-line per record case. </p></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>Implementation Tips:</h2>
<ul>
  <li>applicable for both object item &amp; list</li>
</ul>
<p>&nbsp;</p>
</body>
</html>
