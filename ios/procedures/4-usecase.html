<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>4-usecase</title>
</head>

<body>
<h1>4-usecase &amp; 5-UseCaseCentral</h1>
<p>&nbsp;</p>
<p>should I add a UseCaseSet class to represent a set of UCs shared the same entity??</p>
<p>&nbsp;</p>
<h2>4-usecase</h2>
<p>Mechanism context need to be provided by UCC.</p>
<p>ModelType (datamodel-driven) UC should keep its modelType (type of NSInteger)</p>
<p>Non-CRUD method/usecase can be represented as a subclass of UseCase_modelType, named as the entity name (captial little??)</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<table width="100%" border="1">
  <tr>
    <td>&nbsp;</td>
    <td>JXCD</td>
    <td>&nbsp;</td>
    <td>SHCC</td>
  </tr>
  <tr>
    <td>readonly</td>
    <td>- (NSFetchedResultsController * ) fetchedResultsController;</td>
    <td>&nbsp;</td>
    <td><p>SHCCUseCase_base</p>
      <p>&nbsp;</p>
      <p>- (NSArray*) listObject;</p>
      <p>//- (NSArray*) listObjectWithCriteria: (id) criteria;</p>
      <p>- (id) getObjectById: (id) ID;</p></td>
  </tr>
  <tr>
    <td>mutation</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td><p>- (id) addObject: (id) object;</p>
      <p>//- (id) createObjectWithDictionary: (NSDictionary*) dict;</p>
      <p>- (BOOL) updateObject: (id) object;</p>
      <p>//- (BOOL) updateObject: (id) object dictionary: (NSDictionary*) dict;<br />
      </p>
      <p>- (BOOL) removeObject: (id) object;<br />
      </p>
      <p>// 2013-10-28<br />
        - (id) updateObject:(id)object addValue: (id) value onRelationship: (id) rel ;</p>
      <p>- (BOOL) updateObject:(id)object removeValue:(id)value onRelationship:(id)rel;</p>
      <p>// 2013-10-29</p>
      <p>- (id) updateObject:(id)object setValue:(id)value onRelationship:(id)rel;</p>
      <p>// reset = set nil<br />
        - (BOOL) updateObject:(id)object resetValueOnRelationship:(id)rel;</p></td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td><p>JXCDUseCase_base</p>
      <p>@property (nonatomic, strong) NSManagedObjectContext * context;</p></td>
    <td>&nbsp;</td>
    <td><p>SHCCUseCase_modelType__FSAccess</p>
      <p>@property (nonatomic, assign) NSInteger modelType;<br />
      </p>
      <p>@property (nonatomic, strong) SHCCFSAccessContext * context; </p></td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td><p>JXCDUseCase_modelType_base</p>
      <p>@property (nonatomic, assign) NSInteger modelType;</p>
      <p>@property (nonatomic, strong) NSEntityDescription * entity;</p></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>5-UseCaseCentral</h2>
<p>useCase-modelType mapping and useCase generation. </p>
<p>UCC should managed UC efficiently (e.g. on-demand generation, caching and uniqueness of UC per modelType) </p>
<p>mechanism context (such as NSManagedObjectContext or SHCCFSAccessContext) needs to be exposed. it will be created and configured by UCC singleton (see next section)</p>
<p>General UCC does not have to be a singleton; but business/project-specific UCC should be a singleton</p>
<p>UCC should handle the mechanism errors returned by context. For business/usecase error, a way to be passed out is under consideration.</p>
<p>&nbsp;</p>
<table width="100%" border="1">
  <tr>
    <td>&nbsp;</td>
    <td>JXCD</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td rowspan="2"><p>&nbsp;</p>
    <p>JXCDUseCaseCentral_base</p></td>
    <td><p>JXCDUseCaseCentral_base</p>
<p>&nbsp;</p></td>
    <td>&nbsp;</td>
    <td><p>SHCCUseCaseCentral <br />
    </p>
      <p>+ (instancetype) sharedInstance;<br />
      </p>
      <p>&nbsp;</p>
<p>&nbsp;</p></td>
  </tr>
  <tr>
    <td><p>- (JXCDUseCase_modelType_base*) useCaseForModelType: (NSInteger) modelType;</p>
      <p>@property (nonatomic, strong) NSManagedObjectContext * context;<br />
      </p>
      <p>// when trying to get a usecase for modeltype,<br />
        // check if the class for usecase (named with prefix + entity.name) exists.<br />
        // If exists, alloc-init with this class name<br />
        // otherwise, use JXCDUseCase_modelType_base<br />
    @property (nonatomic, strong) NSString * useCaseClassPrefix;</p></td>
    <td>&nbsp;</td>
    <td><p>- (SHCCUseCase_base*) useCaseByModelType: (SHCCEnum_ModelType) modelType;</p>
    <p>@property (nonatomic, readonly) SHCCFSAccessContext * context;</p></td>
  </tr>
</table>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</body>
</html>
