<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>api-query</title>
</head>

<body>
<h1>api-query</h1>
<p>&nbsp;</p>
<ul>
  <li>NSObject
    <ul>
      <li><a href="https://developer.apple.com/library/ios/documentation/HealthKit/Reference/HKQuery_Class/index.html">HKQuery</a>
<ul>
          <li><a href="https://developer.apple.com/library/ios/documentation/HealthKit/Reference/HKAnchoredObjectQuery_Class/index.html">HKAnchoredObjectQuery</a></li>
          <li>HKCorrelationQuery</li>
          <li>HKObserverQuery</li>
          <li>HKSampleQuery</li>
          <li>HKSourceQuery</li>
          <li>HKStatisticsCollectionQuery</li>
          <li>HKStatisticsQuery</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<p>&nbsp;</p>
<h2><a href="https://developer.apple.com/library/ios/documentation/HealthKit/Reference/HKQuery_Class/index.html">HKQuery</a></h2>
<p>var predicate: NSPredicate! { get }</p>
<p>var sampleType: HKSampleType! { get }</p>
<h3>Creating * Predicates</h3>
<table width="100%" border="1">
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Object</td>
    <td><p>class func predicateForObjectWithUUID(_ UUID: NSUUID!) -&gt; NSPredicate!</p>
    <p>class func predicateForObjectsWithUUIDs(_ UUIDs: NSSet!) -&gt; NSPredicate!</p>
    <p>class func predicateForObjectsFromSource(_ source: HKSource!) -&gt; NSPredicate!</p>
    <p>class func predicateForObjectsFromSources(_ sources: NSSet!) -&gt; NSPredicate!</p>
    <p>class func predicateForObjectsWithMetadataKey(_ key: String!) -&gt; NSPredicate!</p>
    <p>class func predicateForObjectsWithMetadataKey(_ key: String!,<br />
allowedValues allowedValues: [AnyObject]!) -&gt; NSPredicate!</p>
    <p>class func predicateForObjectsWithMetadataKey(_ key: String!,<br />
operatorType operatorType: NSPredicateOperatorType,<br />
value value: AnyObject!) -&gt; NSPredicate!</p>
    <p>class func predicateForObjectsWithNoCorrelation() -&gt; NSPredicate!</p></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Sample</td>
    <td>class func predicateForSamplesWithStartDate(_ startDate: NSDate!,<br />
endDate endDate: NSDate!,<br />
options options: HKQueryOptions) -&gt; NSPredicate!</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Query Sample</td>
    <td><p>class func predicateForQuantitySamplesWithOperatorType(_ operatorType: NSPredicateOperatorType,<br />
    quantity quantity: HKQuantity!) -&gt; NSPredicate!</p></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Category Sample</td>
    <td><p>class func predicateForCategorySamplesWithOperatorType(_ operatorType: NSPredicateOperatorType,<br />
    value value: Int) -&gt; NSPredicate!</p></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Workout</td>
    <td><p>class func predicateForObjectsFromWorkout(_ workout: HKWorkout!) -&gt; NSPredicate!</p>
    <p>class func predicateForWorkoutsWithOperatorType(_ operatorType: NSPredicateOperatorType,<br />
duration duration: NSTimeInterval) -&gt; NSPredicate!</p>
    <p>class func predicateForWorkoutsWithOperatorType(_ operatorType: NSPredicateOperatorType,<br />
totalDistance totalDistance: HKQuantity!) -&gt; NSPredicate!</p>
    <p>class func predicateForWorkoutsWithOperatorType(_ operatorType: NSPredicateOperatorType,<br />
totalEnergyBurned totalEnergyBurned: HKQuantity!) -&gt; NSPredicate!</p>
    <p>class func predicateForWorkoutsWithWorkoutActivityType(_ workoutActivityType: HKWorkoutActivityType) -&gt; NSPredicate!</p></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<table width="100%" border="1">
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><a href="https://developer.apple.com/library/ios/documentation/HealthKit/Reference/HKAnchoredObjectQuery_Class/index.html">HKAnchoredObjectQuery</a></td>
    <td>init!(type type: HKSampleType!,<br />
predicate predicate: NSPredicate!,<br />
anchor anchor: Int,<br />
limit limit: Int,<br />
completionHandler handler: ((HKAnchoredObjectQuery!,<br />
[AnyObject]!,<br />
Int,<br />
NSError!) -&gt; Void)!)</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><a href="https://developer.apple.com/library/ios/documentation/HealthKit/Reference/HKCorrelationQuery_Class/index.html#//apple_ref/occ/cl/HKCorrelationQuery">HKCorrelationQuery</a></td>
    <td> init!(type correlationType: HKCorrelationType!,<br />
predicate predicate: NSPredicate!,<br />
samplePredicates samplePredicates: [NSObject : AnyObject]!,<br />
completion completion: ((HKCorrelationQuery!,<br />
[AnyObject]!,<br />
NSError!) -&gt; Void)!)</td>
    <td><p>@NSCopying var correlationType: HKCorrelationType! { get }</p>
    <p>var samplePredicates: [NSObject : AnyObject]! { get }</p></td>
  </tr>
  <tr>
    <td><a href="https://developer.apple.com/library/ios/documentation/HealthKit/Reference/HKObserverQuery_Class/index.html">HKObserverQuery</a></td>
    <td>init!(sampleType sampleType: HKSampleType!,<br />
predicate predicate: NSPredicate!,<br />
updateHandler updateHandler: ((HKObserverQuery!,<br />
HKObserverQueryCompletionHandler!,<br />
NSError!) -&gt; Void)!)</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><a href="https://developer.apple.com/library/ios/documentation/HealthKit/Reference/HKSampleQuery_Class/index.html#//apple_ref/occ/cl/HKSampleQuery">HKSampleQuery</a></td>
    <td>init!(sampleType sampleType: HKSampleType!,<br />
predicate predicate: NSPredicate!,<br />
limit limit: Int,<br />
sortDescriptors sortDescriptors: [AnyObject]!,<br />
resultsHandler resultsHandler: ((HKSampleQuery!,<br />
[AnyObject]!,<br />
NSError!) -&gt; Void)!)<br /></td>
    <td><p>var limit: Int { get }</p>
    <p>var sortDescriptors: [AnyObject]! { get }</p></td>
  </tr>
  <tr>
    <td><a href="https://developer.apple.com/library/ios/documentation/HealthKit/Reference/HKSourceQuery_Class/index.html#//apple_ref/occ/cl/HKSourceQuery">HKSourceQuery</a></td>
    <td><p>init!(sampleType sampleType: HKSampleType!,<br />
      samplePredicate objectPredicate: NSPredicate!,<br />
      completionHandler completionHandler: ((HKSourceQuery!,<br />
      NSSet!,<br />
    NSError!) -&gt; Void)!)</p></td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><a href="https://developer.apple.com/library/ios/documentation/HealthKit/Reference/HKStatisticsCollectionQuery_Class/index.html#//apple_ref/occ/cl/HKStatisticsCollectionQuery">HKStatisticsCollectionQuery</a></td>
    <td>init!(quantityType quantityType: HKQuantityType!,<br />
      quantitySamplePredicate quantitySamplePredicate: NSPredicate!,<br />
options options: HKStatisticsOptions,<br />
anchorDate anchorDate: NSDate!,<br />
intervalComponents intervalComponents: NSDateComponents!)</td>
    <td><p>var initialResultsHandler: ((HKStatisticsCollectionQuery!, HKStatisticsCollection!, NSError!) -&gt; Void)!</p>
      <p>var statisticsUpdateHandler: ((HKStatisticsCollectionQuery!, HKStatistics!, HKStatisticsCollection!, NSError!) -&gt; Void)!</p>
      <p>var anchorDate: NSDate! { get }</p>
      <p>@NSCopying var intervalComponents: NSDateComponents! { get }</p>
    <p>var options: HKStatisticsOptions { get }</p></td>
  </tr>
  <tr>
    <td><a href="https://developer.apple.com/library/ios/documentation/HealthKit/Reference/HKStatisticsQuery_Class/index.html#//apple_ref/occ/cl/HKStatisticsQuery">HKStatisticsQuery</a></td>
    <td>init!(quantityType quantityType: HKQuantityType!,<br />
      quantitySamplePredicate quantitySamplePredicate: NSPredicate!,<br />
options options: HKStatisticsOptions,<br />
completionHandler handler: ((HKStatisticsQuery!,<br />
HKStatistics!,<br />
NSError!) -&gt; Void)!)</td>
    <td>&nbsp;</td>
  </tr>
</table>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2><a href="https://developer.apple.com/library/ios/documentation/HealthKit/Reference/HKStatistics_Class/index.html">HKStatistics</a></h2>
<p>var startDate: NSDate! { get }</p>
<p>var endDate: NSDate! { get }</p>
<p>var quantityType: HKQuantityType! { get }</p>
<p>var sources: [AnyObject]! { get }</p>
<p>&nbsp;</p>
<table width="100%" border="1">
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>func averageQuantity() -&gt; HKQuantity!</td>
    <td>func averageQuantityForSource(_ source: HKSource!) -&gt; HKQuantity!</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>func maximumQuantity() -&gt; HKQuantity!</td>
    <td>func maximumQuantityForSource(_ source: HKSource!) -&gt; HKQuantity!</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>func minimumQuantity() -&gt; HKQuantity!</td>
    <td>func minimumQuantityForSource(_ source: HKSource!) -&gt; HKQuantity!</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>func sumQuantity() -&gt; HKQuantity!</td>
    <td>func sumQuantityForSource(_ source: HKSource!) -&gt; HKQuantity!</td>
    <td>&nbsp;</td>
  </tr>
</table>
<p>typedef enum : NSUInteger  {<br />
HKStatisticsOptionNone                       = 0,<br />
HKStatisticsOptionSeparateBySource           = 1 &lt;&lt; 0,<br />
HKStatisticsOptionDiscreteAverage            = 1 &lt;&lt; 1,<br />
HKStatisticsOptionDiscreteMin                = 1 &lt;&lt; 2,<br />
HKStatisticsOptionDiscreteMax                = 1 &lt;&lt; 3,<br />
HKStatisticsOptionCumulativeSum              = 1 &lt;&lt; 4,<br />
} HKStatisticsOptions;</p>
<p>&nbsp;</p>
<h2><a href="https://developer.apple.com/library/ios/documentation/HealthKit/Reference/HKStatisticsCollection_Class/index.html#//apple_ref/swift/cl/HKStatisticsCollection">HKStatisticsCollection</a></h2>
<p>&nbsp;</p>
<p>func enumerateStatisticsFromDate(_ startDate: NSDate!,<br />
toDate endDate: NSDate!,<br />
withBlock block: ((HKStatistics!,<br />
UnsafeMutablePointer&lt;ObjCBool&gt;) -&gt; Void)!)</p>
<p>func statistics() -&gt; [AnyObject]!</p>
<p>func statisticsForDate(_ date: NSDate!) -&gt; HKStatistics!</p>
<p>func sources() -&gt; NSSet!</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h1>Summary</h1>
<p>Through comparing Query system of HealthKit, CloudKit and CoreData, we conclude the common for Query</p>
<table width="100%" border="1">
  <tr>
    <td>&nbsp;</td>
    <td>HealthKit</td>
    <td>CloudKit</td>
    <td>CoreData</td>
    <td>SQL</td>
  </tr>
  <tr>
    <td>Request/Query</td>
    <td><a href="https://developer.apple.com/library/ios/documentation/HealthKit/Reference/HKQuery_Class/index.html">HKQuery</a> and subclasses</td>
    <td><a href="https://developer.apple.com/library/ios/documentation/CloudKit/Reference/CKQuery_class/index.html#//apple_ref/doc/uid/TP40014043">CKQuery</a></td>
    <td><a href="https://developer.apple.com/library/ios/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSFetchRequest_Class/index.html#//apple_ref/doc/uid/TP40003606">NSFetchRequest</a></td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Type</td>
    <td>HKSampleType</td>
    <td>RecordType in String</td>
    <td>NSEntityDescription</td>
    <td>from</td>
  </tr>
  <tr>
    <td>Predicate</td>
    <td>Yes</td>
    <td>Yes</td>
    <td>Yes</td>
    <td>where</td>
  </tr>
  <tr>
    <td>Sorts</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>sortDescription</td>
    <td>order</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>limit, offet</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>select</td>
  </tr>
  <tr>
    <td>Response/Results</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>general</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>specific</td>
    <td><p><a href="https://developer.apple.com/library/ios/documentation/HealthKit/Reference/HKStatistics_Class/index.html">HKStatistics </a></p>
    <p><a href="https://developer.apple.com/library/ios/documentation/HealthKit/Reference/HKStatisticsCollection_Class/index.html#//apple_ref/swift/cl/HKStatisticsCollection">HKStatisticsCollection</a></p></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table>
<p>&nbsp;</p>
<p>&nbsp;</p>
</body>
</html>
