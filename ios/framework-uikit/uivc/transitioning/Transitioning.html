<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Transitioning</title>
</head>

<body>
<h1>Transitioning</h1>
<p>&nbsp;</p>
<p>WWDC 2013-218 Custom Transitions Using View Controllers</p>
<p>&nbsp;</p>
<h2>Tutorials &amp; Sample Code</h2>
<ul>
  <li><a href="http://www.appdesignvault.com/custom-transition-ios-7/">iOS 7 Custom Transitions: An Opportunity to Set Your App Apart From the Competition</a> (Register required, but trust me, the source code is worthy)</li>
  <li><a href="http://www.teehanlax.com/blog/custom-uiviewcontroller-transitions/">Custom UIViewController Transitions</a> (Explanation is good, but source code is buggy with iOS8 and Simulator)</li>
</ul>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>UIViewControllerTransitioningDelegate</h2>
<p>&nbsp;</p>
<p>An object that implements the UIViewControllerTransitioningDelegate protocol vends the objects used to manage a fixed-length or interactive transition between view controllers. When you want to present a view controller using a custom modal presentation type, set its modalTransitionStyle property to UIModalPresentationCustom and assign an object that conforms to this protocol to its transitioningDelegate property. When you present that view controller, UIKit queries your transitioning delegate for the objects to use when animating the view controller into position.</p>
<p>When implementing your transitioning delegate object, you can return different animator objects depending on whether a view controller is being presented or dismissed. All transitions use a transition animator object—an object that conforms to the UIViewControllerAnimatedTransitioning protocol—to implement the basic animations. A transition animator object performs a set of animations over a finite period of time. If you want to use touch input or other user interactions to control the timing of the animation, you can also provide an interactive animator object—an object that conforms to the UIViewControllerInteractiveTransitioning protocol—to update the progress of the animations. You can provide separate animator objects for presenting and dismissing the view controller.</p>
<p>For custom modal transition styles, you can provide a UIPresentationController object in addition to the animator objects. The system creates your presentation controller before presenting the view controller and keeps a reference to that object until the view controller is dismissed. Because its existence extends beyond the lifespan of either animator object, you can use the presentation controller to coordinate aspects of the presentation or dismissal process that would be difficult to do otherwise. For example, if your custom transition style involves displaying a separate shadow view as a backdrop to the view controller's content, the presentation controller can create the shadow view and show it and hide it at the appropriate times.</p>
<p>&nbsp;</p>
<table width="100%" border="1">
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Getting the Transition Animator Objects</td>
    <td><ul>
      <li>@optional func animationControllerForPresentedController(_ presented: UIViewController!,<br />
        presentingController presenting: UIViewController!,<br />
        sourceController source: UIViewController!) -&gt; UIViewControllerAnimatedTransitioning!</li>
      <li>@optional func animationControllerForDismissedController(_ dismissed: UIViewController!) -&gt; UIViewControllerAnimatedTransitioning!</li>
    </ul></td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Getting the Interactive Animator Objects</td>
    <td><ul>
      <li>@optional func interactionControllerForPresentation(_ animator: UIViewControllerAnimatedTransitioning!) -&gt; UIViewControllerInteractiveTransitioning!</li>
      <li>@optional func interactionControllerForDismissal(_ animator: UIViewControllerAnimatedTransitioning!) -&gt; UIViewControllerInteractiveTransitioning!</li>
    </ul></td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Getting the Custom Presentation Controller</td>
    <td><ul>
      <li>@optional func presentationControllerForPresentedViewController(_ presented: UIViewController!,<br />
        presentingViewController presenting: UIViewController!,<br />
        sourceViewController source: UIViewController!) -&gt; UIPresentationController!</li>
    </ul></td>
    <td>&nbsp;</td>
  </tr>
</table>
<p></p>
<p></p>
<h2><a href="https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIViewControllerAnimatedTransitioning_Protocol/index.html#//apple_ref/doc/uid/TP40013387">UIViewControllerAnimatedTransitioning</a></h2>
<p>Adopt the UIViewControllerAnimatedTransitioning protocol in objects that implement the animations for a custom view controller transition. The methods in this protocol let you define an animator object, which creates the animations for transitioning a view controller on or off screen in a fixed amount of time. The animations you create using this protocol must not be interactive. To create interactive transitions, you must combine your animator object with another object that controls the timing of your animations.</p>
<p>In your animator object, implement the transitionDuration: method to specify the duration of your transition and implement the animateTransition: method to create the animations themselves. Information about the objects involved in the transition is passed to your animateTransition: method in the form of a context object. Use the information provided by that object to move the target view controller's view on or off screen over the specified duration.</p>
<p>Create your animator object from a transitioning delegate—an object that conforms to the UIViewControllerTransitioningDelegate protocol. When presenting a view controller, st the presentation style to UIModalPresentationCustom and assign your transitioning delegate to the view controller's transitioningDelegate property. The view controller retrieves your animator object from the transitioning delegate and uses it to perform the animations. You can provide separate animator objects for presenting and dismissing the view controller.</p>
<p>To add user interaction to a view controller transition, you must use an animator object together with an interactive animator object—a custom object that adopts the UIViewControllerInteractiveTransitioning protocol. For more on defining interactive transitions, see UIViewControllerInteractiveTransitioning Protocol Reference.</p>
<p>&nbsp;</p>
<table width="100%" border="1">
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Performing a Transition</td>
    <td><ul>
      <li>func animateTransition(_ transitionContext: UIViewControllerContextTransitioning!)</li>
      <li>@optional func animationEnded(_ transitionCompleted: Bool)</li>
    </ul></td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Reporting Transition Duration</td>
    <td><ul>
      <li>func transitionDuration(_ transitionContext: UIViewControllerContextTransitioning!) -&gt; NSTimeInterval</li>
    </ul></td>
    <td>&nbsp;</td>
  </tr>
</table>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>UIViewControllerContextTransitioning</h2>
<p>&nbsp;</p>
<p>The UIViewControllerContextTransitioning protocol's methods provide contextual information for transition animations between view controllers. Do not adopt this protocol in your own classes, nor should you directly create objects that adopt this protocol. During a transition, the animator objects involved in that transition receive a fully configured context object from UIKit. Custom animator objects—objects that adopt the UIViewControllerAnimatorTransitioning or UIViewControllerInteractiveTransitioning protocol—should simply retrieve the information they need from the provided object.</p>
<p>A context object encapsulates information about the views and view controllers involved in the transition. It also contains details about the how to execute the transition. For interactive transitions, the interactive animator object uses the methods of this protocol to report the animation's progress. When the animation starts, the interactive animator object must save a pointer to the context object. Based on user interactions, the animator object then calls the updateInteractiveTransition:, finishInteractiveTransition, or cancelInteractiveTransition methods to report the progress toward completing the animation. Those methods send that information to UIKit so that it can drive the timing of the animations.</p>
<p>&nbsp;</p>
<table width="100%" border="1">
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Accessing the Transition Objects</td>
    <td><ul>
      <li>func containerView() -&gt; UIView!</li>
      <li>func viewControllerForKey(_ key: String!) -&gt; UIViewController!</li>
      <li>func viewForKey(_ key: String!) -&gt; UIView!</li>
    </ul></td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Getting the Transition Frame Rectangles</td>
    <td><ul>
      <li>func initialFrameForViewController(_ vc: UIViewController!) -&gt; CGRect</li>
      <li>func finalFrameForViewController(_ vc: UIViewController!) -&gt; CGRect</li>
    </ul></td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Getting the Transition Behaviors</td>
    <td><ul>
      <li>func isAnimated() -&gt; Bool</li>
      <li>func isInteractive() -&gt; Bool</li>
      <li>func presentationStyle() -&gt; UIModalPresentationStyle</li>
    </ul></td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Reporting the Transition Progress</td>
    <td><ul>
      <li>func completeTransition(_ didComplete: Bool)</li>
      <li>func updateInteractiveTransition(_ percentComplete: CGFloat)</li>
      <li>func finishInteractiveTransition()</li>
      <li>func cancelInteractiveTransition()</li>
      <li>func transitionWasCancelled() -&gt; Bool</li>
    </ul></td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Getting the Rotation Factor</td>
    <td><ul>
      <li>func targetTransform() -&gt; CGAffineTransform</li>
    </ul></td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td><p>var UITransitionContextFromViewControllerKey: NSString!<br />
      var UITransitionContextToViewControllerKey: NSString!</p>
      <p>var UITransitionContextFromViewKey: NSString!<br />
        var UITransitionContextToViewKey: NSString!</p></td>
    <td>&nbsp;</td>
  </tr>
</table>
<p></p>
<p></p>
<h2>&nbsp;</h2>
<p>&nbsp;</p>
<h2>UIViewControllerTransitionCoordinator &lt; UIViewControllerTransitionCoordinatorContext</h2>
<p>&nbsp;</p>
<p>During an active view controller transition, use a view controller transition coordinator to respond to user cancelation of the transition.</p>
<p>After transition starts, obtain a view controller transition coordinator by calling [UIViewController transitionCoordinator].Use it to register blocks containing code you want to run at various points during the transition. The system releases the coordinator after the transition completes and the final callback is made.</p>
<p>You can employ a view controller transition coordinator to do either or both of the following:</p>
<ul>
  <li>Run a custom animation—including an interactive animation—inside the animation block of an in-progress view controller transition</li>
  <li>Register a completion handler that is called after a view controller transition completes, such as to return state to what it was prior to the transition</li>
</ul>
<p>Responding to View Controller Transition Progress</p>
<table width="100%" border="1">
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>func animateAlongsideTransition</td>
    <td><p>(_ animation: ((UIViewControllerTransitionCoordinatorContext!) -&gt; Void)!,<br />
    completion completion: ((UIViewControllerTransitionCoordinatorContext!) -&gt; Void)!)</p></td>
    <td> -&gt; Bool</td>
  </tr>
  <tr>
    <td>func animateAlongsideTransitionInView</td>
    <td>(_ view: UIView!,<br />
animation animation: ((UIViewControllerTransitionCoordinatorContext!) -&gt; Void)!,<br />
completion completion: ((UIViewControllerTransitionCoordinatorContext!) -&gt; Void)!)</td>
    <td> -&gt; Bool</td>
  </tr>
  <tr>
    <td>func notifyWhenInteractionEndsUsingBlock</td>
    <td>(_ handler: ((UIViewControllerTransitionCoordinatorContext!) -&gt; Void)!)</td>
    <td>&nbsp;</td>
  </tr>
</table>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>UIViewControllerTransitionCoordinatorContext</h2>
<p>The system creates an object conforming to the UIViewControllerTransitionCoordinatorContext protocol near the start of an animated view controller transition—specifically, before the system calls the transitionDuration method. When implementing your own transition-related objects, use the provided context object to get information about the transition. Do not adopt this protocol in your own classes.</p>
<p>Use this object To obtain references to the disappearing and appearing view controllers participating in an animated transition, call the context's viewControllerForKey: method.</p>
<p>&nbsp;</p>
<table width="100%" border="1">
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Getting the Views and View Controllers</td>
    <td><ul>
      <li>func viewControllerForKey(_ key: String!) -&gt; UIViewController!</li>
      <li>func containerView() -&gt; UIView!</li>
    </ul></td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Getting the Behavior Attributes</td>
    <td><ul>
      <li>func presentationStyle() -&gt; UIModalPresentationStyle</li>
      <li>func transitionDuration() -&gt; NSTimeInterval</li>
      <li>func completionCurve() -&gt; UIViewAnimationCurve</li>
      <li>func completionVelocity() -&gt; CGFloat</li>
      <li>func percentComplete() -&gt; CGFloat</li>
    </ul></td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Getting the Transition State</td>
    <td><ul>
      <li>func initiallyInteractive() -&gt; Bool</li>
      <li>func isAnimated() -&gt; Bool</li>
      <li>func isCancelled() -&gt; Bool</li>
      <li>func isInteractive() -&gt; Bool</li>
    </ul></td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Getting the Rotation Factor</td>
    <td><ul>
      <li>func targetTransform() -&gt; CGAffineTransform</li>
    </ul></td>
    <td>&nbsp;</td>
  </tr>
</table>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</body>
</html>
