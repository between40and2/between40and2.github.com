<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
</head>

<body>
<h1>CoreData Basics</h1>
<p>&nbsp;</p>
<h2>Objectives</h2>
<ul>
  <li>how to Xcode to create model</li>
  <li>code for CRUD</li>
</ul>
<p>&nbsp;</p>
<h2>Xcode and model building</h2>
<p>UI components</p>
<ul>
  <li>Outline</li>
  <li>Canvas</li>
  <li>Toolbar</li>
  <li>Inspectors</li>
</ul>
<p>&nbsp;</p>
<h2>Code for CRUD</h2>
<p>&nbsp;</p>
<h3>Reading</h3>
<p>2 ways</p>
<table width="100%" border="1">
  <tr>
    <td>&nbsp;</td>
    <td>NSFetchRequest</td>
    <td>NSFetchedResultsController</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>fr = [[NSFetchRequest alloc] initWithEntityName: @&quot;Graph&quot;];<br />
fr.sortDescriptors = @[[NSSortDescriptor sortDescriptorWithKey: @&quot;datetime_create&quot; ascending: YES]];</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>frc = [[NSFetchedResultsController alloc] initWithFetchRequest: fr managedObjectContext: managedObjectContext sectionNameKeyPath: nil cacheName: nil];</td>
  </tr>
  <tr>
    <td>execute </td>
    <td><p><a href="https://developer.apple.com/library/ios/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/index.html#//apple_ref/occ/instm/NSManagedObjectContext/executeFetchRequest:error:">func executeFetchRequest(_ request: NSFetchRequest,<br />
    error error: NSErrorPointer) -&gt; [AnyObject]?</a></p>
    <p>&nbsp;</p></td>
    <td><p> [frc performFetch: &amp;error]</p>
    <p>&nbsp;</p></td>
  </tr>
</table>
<p><br />
</p>
<table width="100%" border="1">
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>func objectRegisteredForID(_ objectID: NSManagedObjectID) -&gt; NSManagedObject?</td>
    <td>The object for the specified ID if it is registered with the receiver, otherwise nil.</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>func objectWithID(_ objectID: NSManagedObjectID) -&gt; NSManagedObject</td>
    <td>If the object is not registered in the context, it may be fetched or returned as a fault. This method always returns an object. The data in the persistent store represented by objectID is assumed to existâ€”if it does not, the returned object throws an exception when you access any property (that is, when the fault is fired). The benefit of this behavior is that it allows you to create and use faults, then create the underlying data later or in a separate context.</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>func existingObjectWithID(_ objectID: NSManagedObjectID,<br />
error error: NSErrorPointer) -&gt; NSManagedObject?</td>
    <td>The object specified by objectID. If the object cannot be fetched, or does not exist, or cannot be faulted, it returns nil.</td>
    <td>&nbsp;</td>
  </tr>
</table>
<p>&nbsp;</p>
<p><br />
</p>
<h3>Writing</h3>
<table width="100%" border="1">
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Create</td>
    <td><p>NSManagedObject * mo = [NSEntityDescription insertNewObjectForEntityForName: @&quot;Graph&quot; inManagedObjectContext:self.managedObjectContext];</p>
      <p><br />
        [mo setValue: [NSDate date] forKey: @&quot;datetime_create&quot;];<br />
        [mo setValue: tf.text forKey: @&quot;name&quot;];<br />
        <br />
    </p></td>
    <td>NSError * error = nil;<br />
if( ![self.managedObjectContext save: &amp;error]){<br />
<br />
NSLog(@&quot;%@&quot;, error);<br />
}</td>
  </tr>
  <tr>
    <td>Update</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table>
<p>&nbsp;</p>
<p>&nbsp;</p>
</body>
</html>
